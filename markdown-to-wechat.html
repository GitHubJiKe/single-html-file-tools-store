<!-- Markdown ËΩ¨ÂÖ¨‰ºóÂè∑Ê†ºÂºèÂ∑•ÂÖ∑ÔºàÂçïÊñá‰ª∂HTMLÂÆûÁé∞ÔºåÊó†ÈúÄÊûÑÂª∫Ê≠•È™§Ôºâ-->
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown ËΩ¨ÂÖ¨‰ºóÂè∑Ê†ºÂºè</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      background: #f5f5f5;
      overflow-x: hidden;
    }
    .container {
      display: flex;
      height: 100vh;
      flex-direction: column;
    }
    
    /* Â§¥ÈÉ®Â∑•ÂÖ∑Ê†è */
    .header {
      background: white;
      padding: 12px 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      z-index: 100;
    }
    .header h1 {
      font-size: 20px;
      color: #333;
      margin: 0;
    }
    .toolbar {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .theme-selector {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .theme-selector label {
      font-size: 14px;
      color: #666;
    }
    .theme-selector select {
      padding: 6px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      background: white;
    }
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }
    .btn-primary {
      background: #07c160;
      color: white;
    }
    .btn-primary:hover {
      background: #06ad56;
    }
    .btn-secondary {
      background: #f0f0f0;
      color: #333;
    }
    .btn-secondary:hover {
      background: #e0e0e0;
    }
    
    /* ‰∏ªÂÜÖÂÆπÂå∫ */
    .main-content {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    .editor-panel, .preview-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .editor-panel {
      background: #1e1e1e;
      border-right: 1px solid #ddd;
    }
    .preview-panel {
      background: white;
    }
    .panel-header {
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 500;
      border-bottom: 1px solid #ddd;
    }
    .editor-panel .panel-header {
      background: #2d2d2d;
      color: #ccc;
      border-bottom: 1px solid #1e1e1e;
    }
    .preview-panel .panel-header {
      background: #fafafa;
      color: #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    /* ÁºñËæëÂô® */
    #editor {
      flex: 1;
      padding: 16px;
      border: none;
      outline: none;
      resize: none;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
      background: #1e1e1e;
      color: #d4d4d4;
    }
    
    /* È¢ÑËßàÂå∫ */
    #preview {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
      background: white;
    }
    
    /* ÂÖ¨‰ºóÂè∑Ê†∑Âºè‰∏ªÈ¢ò */
    .wechat-content {
      max-width: 677px;
      margin: 0 auto;
      word-wrap: break-word;
      font-size: 16px;
      line-height: 1.75;
      color: #333;
    }
    
    /* ÈªòËÆ§‰∏ªÈ¢ò */
    .theme-default h1, .theme-default h2, .theme-default h3, 
    .theme-default h4, .theme-default h5, .theme-default h6 {
      margin-top: 1.2em;
      margin-bottom: 0.6em;
      font-weight: 600;
      line-height: 1.4;
      color: #07c160;
    }
    .theme-default h1 { font-size: 1.8em; border-bottom: 2px solid #07c160; padding-bottom: 0.3em; }
    .theme-default h2 { font-size: 1.5em; border-left: 4px solid #07c160; padding-left: 12px; }
    .theme-default h3 { font-size: 1.3em; }
    .theme-default h4 { font-size: 1.2em; }
    .theme-default h5 { font-size: 1.1em; }
    .theme-default h6 { font-size: 1em; }
    
    .theme-default p {
      margin: 1em 0;
      text-align: justify;
    }
    
    .theme-default strong {
      color: #07c160;
      font-weight: 600;
    }
    
    .theme-default em {
      color: #666;
      font-style: italic;
    }
    
    .theme-default blockquote {
      margin: 1em 0;
      padding: 12px 16px;
      background: #f7f7f7;
      border-left: 4px solid #07c160;
      color: #666;
      font-style: italic;
    }
    
    .theme-default code {
      padding: 2px 6px;
      background: #f5f5f5;
      color: #e74c3c;
      border-radius: 3px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.9em;
    }
    
    .theme-default pre {
      margin: 1em 0;
      padding: 16px;
      background: #282c34;
      border-radius: 6px;
      overflow-x: auto;
    }
    
    .theme-default pre code {
      padding: 0;
      background: none;
      color: #abb2bf;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .theme-default ul, .theme-default ol {
      margin: 1em 0;
      padding-left: 2em;
    }
    
    .theme-default li {
      margin: 0.5em 0;
    }
    
    .theme-default a {
      color: #07c160;
      text-decoration: none;
      border-bottom: 1px solid #07c160;
    }
    
    .theme-default img {
      max-width: 100%;
      border-radius: 6px;
      margin: 1em 0;
      display: block;
    }
    
    .theme-default table {
      width: 100%;
      margin: 1em 0;
      border-collapse: collapse;
      font-size: 14px;
    }
    
    .theme-default th, .theme-default td {
      border: 1px solid #ddd;
      padding: 8px 12px;
      text-align: left;
    }
    
    .theme-default th {
      background: #07c160;
      color: white;
      font-weight: 600;
    }
    
    .theme-default tr:nth-child(even) {
      background: #f9f9f9;
    }
    
    .theme-default hr {
      margin: 2em 0;
      border: none;
      border-top: 1px solid #eee;
    }
    
    /* Ê©ôÂøÉ‰∏ªÈ¢ò */
    .theme-orange h1, .theme-orange h2, .theme-orange h3, 
    .theme-orange h4, .theme-orange h5, .theme-orange h6 {
      margin-top: 1.2em;
      margin-bottom: 0.6em;
      font-weight: 600;
      line-height: 1.4;
      color: #d35400;
    }
    .theme-orange h1 { font-size: 1.8em; border-bottom: 2px solid #e67e22; padding-bottom: 0.3em; }
    .theme-orange h2 { font-size: 1.5em; border-left: 4px solid #e67e22; padding-left: 12px; }
    .theme-orange h3 { font-size: 1.3em; }
    .theme-orange h4 { font-size: 1.2em; }
    .theme-orange h5 { font-size: 1.1em; }
    .theme-orange h6 { font-size: 1em; }
    
    .theme-orange p {
      margin: 1em 0;
      text-align: justify;
      color: #333;
    }
    
    .theme-orange strong {
      color: #e67e22;
      font-weight: 600;
    }
    
    .theme-orange blockquote {
      margin: 1em 0;
      padding: 12px 16px;
      background: #fef5e7;
      border-left: 4px solid #e67e22;
      color: #666;
    }
    
    .theme-orange code {
      padding: 2px 6px;
      background: #fef5e7;
      color: #d35400;
      border-radius: 3px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.9em;
    }
    
    .theme-orange pre {
      margin: 1em 0;
      padding: 16px;
      background: #2c3e50;
      border-radius: 6px;
      overflow-x: auto;
    }
    
    .theme-orange pre code {
      padding: 0;
      background: none;
      color: #ecf0f1;
      font-size: 14px;
    }
    
    .theme-orange ul, .theme-orange ol {
      margin: 1em 0;
      padding-left: 2em;
    }
    
    .theme-orange li {
      margin: 0.5em 0;
    }
    
    .theme-orange a {
      color: #e67e22;
      text-decoration: none;
      border-bottom: 1px solid #e67e22;
    }
    
    .theme-orange img {
      max-width: 100%;
      border-radius: 6px;
      margin: 1em 0;
      display: block;
    }
    
    .theme-orange table {
      width: 100%;
      margin: 1em 0;
      border-collapse: collapse;
      font-size: 14px;
    }
    
    .theme-orange th, .theme-orange td {
      border: 1px solid #ddd;
      padding: 8px 12px;
      text-align: left;
    }
    
    .theme-orange th {
      background: #e67e22;
      color: white;
      font-weight: 600;
    }
    
    .theme-orange tr:nth-child(even) {
      background: #fef5e7;
    }
    
    /* ËìùË∞É‰∏ªÈ¢ò */
    .theme-blue h1, .theme-blue h2, .theme-blue h3, 
    .theme-blue h4, .theme-blue h5, .theme-blue h6 {
      margin-top: 1.2em;
      margin-bottom: 0.6em;
      font-weight: 600;
      line-height: 1.4;
      color: #2980b9;
    }
    .theme-blue h1 { font-size: 1.8em; border-bottom: 2px solid #3498db; padding-bottom: 0.3em; }
    .theme-blue h2 { font-size: 1.5em; border-left: 4px solid #3498db; padding-left: 12px; }
    .theme-blue h3 { font-size: 1.3em; }
    .theme-blue h4 { font-size: 1.2em; }
    .theme-blue h5 { font-size: 1.1em; }
    .theme-blue h6 { font-size: 1em; }
    
    .theme-blue p {
      margin: 1em 0;
      text-align: justify;
      color: #333;
    }
    
    .theme-blue strong {
      color: #3498db;
      font-weight: 600;
    }
    
    .theme-blue blockquote {
      margin: 1em 0;
      padding: 12px 16px;
      background: #ebf5fb;
      border-left: 4px solid #3498db;
      color: #666;
    }
    
    .theme-blue code {
      padding: 2px 6px;
      background: #ebf5fb;
      color: #2980b9;
      border-radius: 3px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.9em;
    }
    
    .theme-blue pre {
      margin: 1em 0;
      padding: 16px;
      background: #1e3a5f;
      border-radius: 6px;
      overflow-x: auto;
    }
    
    .theme-blue pre code {
      padding: 0;
      background: none;
      color: #e8f4f8;
      font-size: 14px;
    }
    
    .theme-blue ul, .theme-blue ol {
      margin: 1em 0;
      padding-left: 2em;
    }
    
    .theme-blue li {
      margin: 0.5em 0;
    }
    
    .theme-blue a {
      color: #3498db;
      text-decoration: none;
      border-bottom: 1px solid #3498db;
    }
    
    .theme-blue img {
      max-width: 100%;
      border-radius: 6px;
      margin: 1em 0;
      display: block;
    }
    
    .theme-blue table {
      width: 100%;
      margin: 1em 0;
      border-collapse: collapse;
      font-size: 14px;
    }
    
    .theme-blue th, .theme-blue td {
      border: 1px solid #ddd;
      padding: 8px 12px;
      text-align: left;
    }
    
    .theme-blue th {
      background: #3498db;
      color: white;
      font-weight: 600;
    }
    
    .theme-blue tr:nth-child(even) {
      background: #ebf5fb;
    }
    
    /* Á¥´ÁΩóÂÖ∞‰∏ªÈ¢ò */
    .theme-purple h1, .theme-purple h2, .theme-purple h3, 
    .theme-purple h4, .theme-purple h5, .theme-purple h6 {
      margin-top: 1.2em;
      margin-bottom: 0.6em;
      font-weight: 600;
      line-height: 1.4;
      color: #8e44ad;
    }
    .theme-purple h1 { font-size: 1.8em; border-bottom: 2px solid #9b59b6; padding-bottom: 0.3em; }
    .theme-purple h2 { font-size: 1.5em; border-left: 4px solid #9b59b6; padding-left: 12px; }
    .theme-purple h3 { font-size: 1.3em; }
    .theme-purple h4 { font-size: 1.2em; }
    .theme-purple h5 { font-size: 1.1em; }
    .theme-purple h6 { font-size: 1em; }
    
    .theme-purple p {
      margin: 1em 0;
      text-align: justify;
      color: #333;
    }
    
    .theme-purple strong {
      color: #9b59b6;
      font-weight: 600;
    }
    
    .theme-purple blockquote {
      margin: 1em 0;
      padding: 12px 16px;
      background: #f4ecf7;
      border-left: 4px solid #9b59b6;
      color: #666;
    }
    
    .theme-purple code {
      padding: 2px 6px;
      background: #f4ecf7;
      color: #8e44ad;
      border-radius: 3px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.9em;
    }
    
    .theme-purple pre {
      margin: 1em 0;
      padding: 16px;
      background: #2c2c3e;
      border-radius: 6px;
      overflow-x: auto;
    }
    
    .theme-purple pre code {
      padding: 0;
      background: none;
      color: #e8dff5;
      font-size: 14px;
    }
    
    .theme-purple ul, .theme-purple ol {
      margin: 1em 0;
      padding-left: 2em;
    }
    
    .theme-purple li {
      margin: 0.5em 0;
    }
    
    .theme-purple a {
      color: #9b59b6;
      text-decoration: none;
      border-bottom: 1px solid #9b59b6;
    }
    
    .theme-purple img {
      max-width: 100%;
      border-radius: 6px;
      margin: 1em 0;
      display: block;
    }
    
    .theme-purple table {
      width: 100%;
      margin: 1em 0;
      border-collapse: collapse;
      font-size: 14px;
    }
    
    .theme-purple th, .theme-purple td {
      border: 1px solid #ddd;
      padding: 8px 12px;
      text-align: left;
    }
    
    .theme-purple th {
      background: #9b59b6;
      color: white;
      font-weight: 600;
    }
    
    .theme-purple tr:nth-child(even) {
      background: #f4ecf7;
    }
    
    /* ÊûÅÁÆÄÈªë‰∏ªÈ¢ò */
    .theme-minimal h1, .theme-minimal h2, .theme-minimal h3, 
    .theme-minimal h4, .theme-minimal h5, .theme-minimal h6 {
      margin-top: 1.2em;
      margin-bottom: 0.6em;
      font-weight: 600;
      line-height: 1.4;
      color: #1a1a1a;
    }
    .theme-minimal h1 { font-size: 1.8em; border-bottom: 1px solid #1a1a1a; padding-bottom: 0.3em; }
    .theme-minimal h2 { font-size: 1.5em; }
    .theme-minimal h3 { font-size: 1.3em; }
    .theme-minimal h4 { font-size: 1.2em; }
    .theme-minimal h5 { font-size: 1.1em; }
    .theme-minimal h6 { font-size: 1em; }
    
    .theme-minimal p {
      margin: 1em 0;
      text-align: justify;
      color: #333;
    }
    
    .theme-minimal strong {
      color: #1a1a1a;
      font-weight: 700;
    }
    
    .theme-minimal blockquote {
      margin: 1em 0;
      padding: 12px 16px;
      background: #f9f9f9;
      border-left: 3px solid #1a1a1a;
      color: #666;
    }
    
    .theme-minimal code {
      padding: 2px 6px;
      background: #f5f5f5;
      color: #1a1a1a;
      border-radius: 2px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.9em;
    }
    
    .theme-minimal pre {
      margin: 1em 0;
      padding: 16px;
      background: #1a1a1a;
      border-radius: 4px;
      overflow-x: auto;
    }
    
    .theme-minimal pre code {
      padding: 0;
      background: none;
      color: #f5f5f5;
      font-size: 14px;
    }
    
    .theme-minimal ul, .theme-minimal ol {
      margin: 1em 0;
      padding-left: 2em;
    }
    
    .theme-minimal li {
      margin: 0.5em 0;
    }
    
    .theme-minimal a {
      color: #1a1a1a;
      text-decoration: none;
      border-bottom: 1px solid #1a1a1a;
    }
    
    .theme-minimal img {
      max-width: 100%;
      margin: 1em 0;
      display: block;
    }
    
    .theme-minimal table {
      width: 100%;
      margin: 1em 0;
      border-collapse: collapse;
      font-size: 14px;
    }
    
    .theme-minimal th, .theme-minimal td {
      border: 1px solid #ddd;
      padding: 8px 12px;
      text-align: left;
    }
    
    .theme-minimal th {
      background: #1a1a1a;
      color: white;
      font-weight: 600;
    }
    
    .theme-minimal tr:nth-child(even) {
      background: #fafafa;
    }
    
    /* ÊèêÁ§∫Ê∂àÊÅØ */
    .toast {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: #07c160;
      color: white;
      padding: 12px 24px;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }
    .toast.show {
      opacity: 1;
    }
    
    /* ÁßªÂä®Á´ØÈÄÇÈÖç */
    @media (max-width: 768px) {
      .main-content {
        flex-direction: column;
      }
      .editor-panel {
        border-right: none;
        border-bottom: 1px solid #ddd;
        max-height: 40vh;
      }
      .header h1 {
        font-size: 16px;
      }
      .toolbar {
        width: 100%;
        justify-content: space-between;
      }
      .btn {
        padding: 6px 12px;
        font-size: 12px;
      }
      .theme-selector select {
        font-size: 12px;
        padding: 4px 8px;
      }
      #preview {
        padding: 16px;
      }
      .wechat-content {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Â§¥ÈÉ®Â∑•ÂÖ∑Ê†è -->
    <div class="header">
      <h1>üìù Markdown ËΩ¨ÂÖ¨‰ºóÂè∑Ê†ºÂºè</h1>
      <div class="toolbar">
        <div class="theme-selector">
          <label>‰∏ªÈ¢òÔºö</label>
          <select id="themeSelect">
            <option value="default">ÂæÆ‰ø°Áªø</option>
            <option value="orange">Ê©ôÂøÉ</option>
            <option value="blue">ËìùË∞É</option>
            <option value="purple">Á¥´ÁΩóÂÖ∞</option>
            <option value="minimal">ÊûÅÁÆÄÈªë</option>
          </select>
        </div>
        <button class="btn btn-secondary" onclick="clearContent()">Ê∏ÖÁ©∫</button>
        <button class="btn btn-primary" onclick="copyToClipboard()">üìã Â§çÂà∂Âà∞ÂÖ¨‰ºóÂè∑</button>
      </div>
    </div>
    
    <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
    <div class="main-content">
      <!-- ÁºñËæëÂô®Èù¢Êùø -->
      <div class="editor-panel">
        <div class="panel-header">Markdown ÁºñËæëÂô®</div>
        <textarea id="editor" placeholder="Âú®ËøôÈáåÁ≤òË¥¥ÊàñËæìÂÖ• Markdown ÂÜÖÂÆπ...

Á§∫‰æãÔºö

# ËøôÊòØ‰∏ÄÁ∫ßÊ†áÈ¢ò

## ËøôÊòØ‰∫åÁ∫ßÊ†áÈ¢ò

ËøôÊòØ‰∏ÄÊÆµÊôÆÈÄöÊñáÂ≠óÔºåÊîØÊåÅ**Á≤ó‰Ωì**Âíå*Êñú‰Ωì*„ÄÇ

> ËøôÊòØÂºïÁî®ÂÜÖÂÆπ

### ‰ª£Á†ÅÁ§∫‰æã

Ë°åÂÜÖ‰ª£Á†ÅÔºö`console.log('Hello')`

‰ª£Á†ÅÂùóÔºö
```javascript
function hello() {
  console.log('Hello World!');
}
```

### ÂàóË°®

- ÂàóË°®È°π 1
- ÂàóË°®È°π 2
- ÂàóË°®È°π 3

### Ë°®Ê†º

| Âàó1 | Âàó2 | Âàó3 |
|-----|-----|-----|
| Êï∞ÊçÆ1 | Êï∞ÊçÆ2 | Êï∞ÊçÆ3 |

### ÈìæÊé•

[ÁÇπÂáªËøôÈáå](https://example.com)

---

ËØïËØïÁ≤òË¥¥‰Ω†ÁöÑ Markdown ÂÜÖÂÆπÂêßÔºÅ"></textarea>
      </div>
      
      <!-- È¢ÑËßàÈù¢Êùø -->
      <div class="preview-panel">
        <div class="panel-header">
          <span>È¢ÑËßàÊïàÊûú</span>
          <span style="font-size: 12px; color: #999;">ÔºàÂ§çÂà∂ÂêéÂèØÁõ¥Êé•Á≤òË¥¥Âà∞ÂÖ¨‰ºóÂè∑ÁºñËæëÂô®Ôºâ</span>
        </div>
        <div id="preview">
          <div class="wechat-content theme-default" id="content"></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ÊèêÁ§∫Ê∂àÊÅØ -->
  <div class="toast" id="toast"></div>

  <script>
    // Markdown Ëß£ÊûêÂô®ÔºàÁÆÄÂåñÁâàÔºâ
    class SimpleMarkdownParser {
      constructor() {
        this.rules = [
          // Ê†áÈ¢ò
          { pattern: /^### (.*$)/gm, replacement: '<h3>$1</h3>' },
          { pattern: /^## (.*$)/gm, replacement: '<h2>$1</h2>' },
          { pattern: /^# (.*$)/gm, replacement: '<h1>$1</h1>' },
          { pattern: /^#### (.*$)/gm, replacement: '<h4>$1</h4>' },
          { pattern: /^##### (.*$)/gm, replacement: '<h5>$1</h5>' },
          { pattern: /^###### (.*$)/gm, replacement: '<h6>$1</h6>' },
          
          // Ê∞¥Âπ≥Á∫ø
          { pattern: /^\-{3,}$/gm, replacement: '<hr>' },
          { pattern: /^\*{3,}$/gm, replacement: '<hr>' },
          
          // Á≤ó‰ΩìÂíåÊñú‰Ωì
          { pattern: /\*\*\*(.*?)\*\*\*/g, replacement: '<strong><em>$1</em></strong>' },
          { pattern: /\*\*(.*?)\*\*/g, replacement: '<strong>$1</strong>' },
          { pattern: /\*(.*?)\*/g, replacement: '<em>$1</em>' },
          { pattern: /___(.*?)___/g, replacement: '<strong><em>$1</em></strong>' },
          { pattern: /__(.*?)__/g, replacement: '<strong>$1</strong>' },
          { pattern: /_(.*?)_/g, replacement: '<em>$1</em>' },
          
          // Ë°åÂÜÖ‰ª£Á†ÅÔºàÂú®‰ª£Á†ÅÂùó‰πãÂâçÂ§ÑÁêÜÔºâ
          { pattern: /`([^`\n]+)`/g, replacement: '<code>$1</code>' },
          
          // ÈìæÊé•
          { pattern: /\[([^\]]+)\]\(([^\)]+)\)/g, replacement: '<a href="$2" target="_blank">$1</a>' },
          
          // ÂõæÁâá
          { pattern: /!\[([^\]]*)\]\(([^\)]+)\)/g, replacement: '<img src="$2" alt="$1">' },
        ];
      }
      
      parse(markdown) {
        let html = markdown;
        
        // Â§ÑÁêÜ‰ª£Á†ÅÂùó
        html = this.parseCodeBlocks(html);
        
        // Â§ÑÁêÜÂºïÁî®
        html = this.parseBlockquotes(html);
        
        // Â§ÑÁêÜË°®Ê†º
        html = this.parseTables(html);
        
        // Â§ÑÁêÜÂàóË°®
        html = this.parseLists(html);
        
        // Â∫îÁî®ÂÖ∂‰ªñËßÑÂàô
        this.rules.forEach(rule => {
          html = html.replace(rule.pattern, rule.replacement);
        });
        
        // Â§ÑÁêÜÊÆµËêΩ
        html = this.parseParagraphs(html);
        
        return html;
      }
      
      parseCodeBlocks(text) {
        // ÂåπÈÖç‰ª£Á†ÅÂùó ```language\ncode\n```
        return text.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
          const escapedCode = this.escapeHtml(code.trim());
          return `<pre><code>${escapedCode}</code></pre>`;
        });
      }
      
      parseBlockquotes(text) {
        const lines = text.split('\n');
        let result = [];
        let inQuote = false;
        let quoteContent = [];
        
        lines.forEach(line => {
          if (line.startsWith('>')) {
            inQuote = true;
            quoteContent.push(line.substring(1).trim());
          } else {
            if (inQuote) {
              result.push(`<blockquote>${quoteContent.join('\n')}</blockquote>`);
              quoteContent = [];
              inQuote = false;
            }
            result.push(line);
          }
        });
        
        if (inQuote) {
          result.push(`<blockquote>${quoteContent.join('\n')}</blockquote>`);
        }
        
        return result.join('\n');
      }
      
      parseTables(text) {
        const lines = text.split('\n');
        let result = [];
        let inTable = false;
        let tableRows = [];
        
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i].trim();
          
          if (line.includes('|')) {
            // Ê£ÄÊü•ÊòØÂê¶ÊòØÂàÜÈöîË°å
            if (line.match(/^\|?[\s\-:|]+\|?$/)) {
              inTable = true;
              continue;
            }
            
            if (inTable || (i + 1 < lines.length && lines[i + 1].match(/^\|?[\s\-:|]+\|?$/))) {
              inTable = true;
              const cells = line.split('|').map(cell => cell.trim()).filter(cell => cell);
              tableRows.push(cells);
            } else {
              result.push(line);
            }
          } else {
            if (inTable && tableRows.length > 0) {
              result.push(this.buildTable(tableRows));
              tableRows = [];
              inTable = false;
            }
            result.push(line);
          }
        }
        
        if (inTable && tableRows.length > 0) {
          result.push(this.buildTable(tableRows));
        }
        
        return result.join('\n');
      }
      
      buildTable(rows) {
        if (rows.length === 0) return '';
        
        let html = '<table>';
        
        // Á¨¨‰∏ÄË°å‰Ωú‰∏∫Ë°®Â§¥
        html += '<thead><tr>';
        rows[0].forEach(cell => {
          html += `<th>${cell}</th>`;
        });
        html += '</tr></thead>';
        
        // ÂÖ∂‰ΩôË°å‰Ωú‰∏∫Ë°®‰Ωì
        if (rows.length > 1) {
          html += '<tbody>';
          for (let i = 1; i < rows.length; i++) {
            html += '<tr>';
            rows[i].forEach(cell => {
              html += `<td>${cell}</td>`;
            });
            html += '</tr>';
          }
          html += '</tbody>';
        }
        
        html += '</table>';
        return html;
      }
      
      parseLists(text) {
        const lines = text.split('\n');
        let result = [];
        let inUl = false;
        let inOl = false;
        
        lines.forEach(line => {
          const ulMatch = line.match(/^[\-\*\+]\s+(.+)$/);
          const olMatch = line.match(/^\d+\.\s+(.+)$/);
          
          if (ulMatch) {
            if (!inUl) {
              result.push('<ul>');
              inUl = true;
            }
            if (inOl) {
              result.push('</ol>');
              inOl = false;
            }
            result.push(`<li>${ulMatch[1]}</li>`);
          } else if (olMatch) {
            if (!inOl) {
              result.push('<ol>');
              inOl = true;
            }
            if (inUl) {
              result.push('</ul>');
              inUl = false;
            }
            result.push(`<li>${olMatch[1]}</li>`);
          } else {
            if (inUl) {
              result.push('</ul>');
              inUl = false;
            }
            if (inOl) {
              result.push('</ol>');
              inOl = false;
            }
            result.push(line);
          }
        });
        
        if (inUl) result.push('</ul>');
        if (inOl) result.push('</ol>');
        
        return result.join('\n');
      }
      
      parseParagraphs(text) {
        // Â∞ÜËøûÁª≠ÁöÑÈùûÊ†áÁ≠æË°åÂåÖË£ÖÊàêÊÆµËêΩ
        const lines = text.split('\n');
        let result = [];
        let paragraph = [];
        
        lines.forEach(line => {
          const trimmed = line.trim();
          
          // Â¶ÇÊûúÊòØÁ©∫Ë°åÊàñHTMLÊ†áÁ≠æÔºåÁªìÊùüÂΩìÂâçÊÆµËêΩ
          if (!trimmed || trimmed.startsWith('<')) {
            if (paragraph.length > 0) {
              result.push(`<p>${paragraph.join(' ')}</p>`);
              paragraph = [];
            }
            if (trimmed) {
              result.push(trimmed);
            }
          } else {
            paragraph.push(trimmed);
          }
        });
        
        if (paragraph.length > 0) {
          result.push(`<p>${paragraph.join(' ')}</p>`);
        }
        
        return result.join('\n');
      }
      
      escapeHtml(text) {
        const map = {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
      }
    }
    
    // ÂàùÂßãÂåñ
    const editor = document.getElementById('editor');
    const preview = document.getElementById('content');
    const themeSelect = document.getElementById('themeSelect');
    const parser = new SimpleMarkdownParser();
    
    // ÂÆûÊó∂È¢ÑËßà
    editor.addEventListener('input', updatePreview);
    themeSelect.addEventListener('change', updateTheme);
    
    function updatePreview() {
      const markdown = editor.value;
      const html = parser.parse(markdown);
      preview.innerHTML = html;
    }
    
    function updateTheme() {
      const theme = themeSelect.value;
      preview.className = `wechat-content theme-${theme}`;
    }
    
    function clearContent() {
      if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÂÜÖÂÆπÂêóÔºü')) {
        editor.value = '';
        preview.innerHTML = '';
      }
    }
    
    function copyToClipboard() {
      const content = preview;
      
      // ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂ÁöÑÂèØÁºñËæëdiv
      const tempDiv = document.createElement('div');
      tempDiv.contentEditable = true;
      tempDiv.style.position = 'absolute';
      tempDiv.style.left = '-9999px';
      
      // Â§çÂà∂Ê†∑ÂºèÂåñÁöÑÂÜÖÂÆπ
      tempDiv.innerHTML = content.innerHTML;
      document.body.appendChild(tempDiv);
      
      // ÈÄâÊã©ÂÜÖÂÆπ
      const range = document.createRange();
      range.selectNodeContents(tempDiv);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      
      try {
        // Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø
        document.execCommand('copy');
        showToast('‚úÖ Â§çÂà∂ÊàêÂäüÔºÅÁé∞Âú®ÂèØ‰ª•Á≤òË¥¥Âà∞ÂÖ¨‰ºóÂè∑ÁºñËæëÂô®‰∫Ü');
      } catch (err) {
        showToast('‚ùå Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®ÈÄâÊã©Â§çÂà∂', 'error');
      }
      
      // Ê∏ÖÁêÜ
      document.body.removeChild(tempDiv);
      selection.removeAllRanges();
    }
    
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      if (type === 'error') {
        toast.style.background = '#e74c3c';
      } else {
        toast.style.background = '#07c160';
      }
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }
    
    // ÂàùÂßãÂåñÈ¢ÑËßà
    updatePreview();
    
    // ÊîØÊåÅ Ctrl+S ‰øùÂ≠òÔºàÈò≤Ê≠¢ÊµèËßàÂô®ÈªòËÆ§Ë°å‰∏∫Ôºâ
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 's') {
        e.preventDefault();
        copyToClipboard();
      }
    });
  </script>
</body>
</html>